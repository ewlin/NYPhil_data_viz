"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return o(n||e)},u,u.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){var r=e("../../temp_utils/generate_seasons.js"),o=e("../../temp_utils/moving_averages.js"),i=e("../../temp_utils/is-mobile.js"),a=e("scrollmagic"),s=e("just-debounce-it"),l="abs",c=window.innerWidth,u=void 0,d=25,f=$(".streamgraph-section .graphic-title").outerHeight(!0),p=$(".container").innerWidth(),g=$(window).innerHeight()-f,h=d3.select(".container").append("svg").attr("x",0).attr("y",0).attr("width",p).attr("height",g),v=d3.scaleLinear().domain([0,174]).range([0,p-92]),m=d3.scaleLinear().range([g-3*d,50]),y=d3.scaleLinear().domain([0,1]).range([g-3*d,50]),w=d3.area().curve(d3.curveCardinal.tension(.1)).x(function(e,t){return v(t)}).y0(function(e){return m(e[0])}).y1(function(e){return m(e[1])}),x=d3.area().curve(d3.curveCardinal.tension(.1)).x(function(e,t){return v(t)}).y0(function(e){return y(e[0])}).y1(function(e){return y(e[1])}),S=d3.annotation().type(d3.annotationLabel).accessors({x:function(e){return v(e.i)},y:function(e){return m(e.workCount)}}),E={},b=void 0,R=void 0,A=void 0,k=void 0,O=void 0,C=r(1842,2016);$("#first-explain").css("margin-top",$(window).innerHeight()/2),$(".explain div").css("margin-bottom",function(){return"last-explain"!==this.id?$(window).innerHeight():0}),d3.json("../../data/composers.json",function(e,t){t.forEach(function(e,t){var n=e.works,r=e.birth,o=e.death;n.forEach(function(e,t){e.seasons.forEach(function(e,t){E[e]||(E[e]={repeat:0,repeatAlive:0,alive:0,dead:0,unknown:0,first:0,composers:{}});var n=parseInt(e);null==r&&null==o?++E[e].unknown:o&&n>o?++E[e].dead:(++E[e].alive,0!=t&&++E[e].repeatAlive),0===t?++E[e].first:++E[e].repeat})})});var n=(O=C.map(function(e){var t=E[e],n=t.first,r=t.repeat;return{season:e,total:n+r,first:n,repeat:r}})).reduce(function(e,t){return e>t.total?e:t.total},0);b=C.map(function(e){var t=E[e],n=t.unknown,r=t.alive,o=t.dead,i=n+r+o;return{season:e,total:i,percentageAlive:r/i,percentageDead:o/i}}),R=C.map(function(e){var t=E[e],n=t.first,r=t.repeat,o=n+r;return{season:e,total:o,percentageFirst:n/o,percentageRepeat:r/o}}),A=C.map(function(e){var t=E[e],n=t.repeatAlive,r=t.repeat;return r=0==r?1:r,{season:e,percentageOfRepeatsLiving:n/r*100}}),k=C.map(function(e){var t=E[e];return{season:e,percentageOfTotalRepeatsLiving:t.repeatAlive/(t.repeat+t.first)}}),m.domain([0,n]);var r=d3.stack().keys(["percentageAlive","percentageDead"]),f=d3.stack().keys(["percentageFirst","percentageRepeat"]),F=d3.stack().keys(["first","repeat"]),P=d3.axisLeft().scale(m).tickSize(0),I=d3.axisLeft().scale(y).tickSize(0).tickFormat(function(e){return 100*e+"%"}),L=d3.axisBottom().scale(v).tickValues(window.innerWidth<="1024"?[8,58,108,158]:[8,33,58,83,108,133,158,174]).tickFormat(function(e){return C[e]}).tickSize(10),D=[{text:"1st-time NYP performance",color:"Tomato"},{text:"Repeat NYP performances",color:"Steelblue"}],_=d3.scaleLinear().domain([0,2]).range([0,p-92]),z=h.append("g").attr("class","graph-legend"),M=z.selectAll(".legend-key").data(D).enter().append("g").attr("class","legend-key").attr("transform","translate(67,0)");M.append("rect").attr("fill",function(e){return e.color}).attr("fill-opacity",.65).attr("stroke",function(e){return e.color}).attr("stroke-width",3),M.append("text").attr("transform","translate(0,14)").text(function(e){return e.text}),c>1024?(M.select("rect").attr("x",function(e,t){return _(t)}).attr("y",2).attr("width",45).attr("height",20),M.select("text").attr("x",function(e,t){return _(t)+60}).attr("y",0)):c<=1024&&(M.select("rect").attr("width",35).attr("height",15).attr("x",0).attr("y",function(e,t){return 0==t?0:25}),M.select("text").attr("x",40).attr("y",function(e,t){return 0==t?0:25})),h.append("g").attr("class","graph-content").selectAll(".path").data(F(O)).enter().append("path").attr("transform","translate(67,0)").attr("d",w).attr("fill",function(e){return"first"==e.key?"Tomato":"repeat"==e.key?"Steelblue":void 0});var U=h.append("g").attr("class","yAxis axis stream-axis").attr("transform","translate(67,0)").call(P);d3.select(".yAxis").select(".domain").remove(),U.append("text").attr("class","axis-label stream-label y-axis-label").text("NUMBER OF UNIQUE PIECES PER SEASON").attr("x",0).attr("y",0).attr("transform","rotate(-90)").attr("dy",-35).attr("dx",-50);var H=h.append("g").attr("class","xAxis axis stream-axis").attr("transform","translate(67,"+(g-3*d)+")").attr("shape-rendering","geometricPrecision").call(L);d3.select(".xAxis").select(".domain").remove(),H.append("text").attr("class","axis-label x-axis-label stream-label").text("NEW YORK PHILHARMONIC SUBSCRIPTION SEASONS").attr("x",""+.5*(p-92)).attr("text-anchor","middle").attr("transform","translate(0,"+1.6*d+")"),H.selectAll(".tick").select("line").attr("stroke","rgba(40, 60, 70, 1)").attr("stroke-dasharray","2,2"),h.append("g").attr("class","annotation-group").attr("transform","translate(67,0)").call(S);var B=d3.line().curve(d3.curveCardinal.tension(.1)).x(function(e,t){return v(t)}).y(function(e){return y(e.percentageOfTotalRepeatsLiving)}),j=h.append("path").attr("class","trendline").attr("transform","translate(67,0)").datum(o(k,["percentageOfTotalRepeatsLiving"],7)).attr("fill","none").attr("stroke","rgba(218, 155, 103, 1)").attr("stroke-dasharray","7, 2").attr("d",function(e){return B([{percentageOfTotalRepeatsLiving:0}])}).style("stroke-width",function(){return i().any()?"2px":"3px"}),W={};Array.prototype.slice.call(document.querySelector(".explain").children).filter(function(e){return e.className}).map(function(e){return e.className}).forEach(function(e){var t=e.match(/[0-9]+/)[0];W["prose"+t]=new a.Scene({triggerElement:"."+e,duration:500,triggerHook:.5}).addTo(T)}),W.prose1.on("enter",function(){$(".explain1").addClass("focus"),function(){l="abs";h.selectAll("path").data(F(O)).transition().duration(1400).attr("d",w).attr("fill",function(e){return"first"==e.key?"Tomato":"repeat"==e.key?"Steelblue":void 0});console.log(O),h.select(".yAxis").transition().duration(1400).call(P),d3.select(".yAxis").select(".domain").remove(),d3.select(".y-axis-label").transition().duration(1400).text("NUMBER OF UNIQUE PIECES PER SEASON");S.accessors({x:function(e){return v(e.i)},y:function(e){return m(e.workCount)}}).annotations([{note:{title:" "},connector:{end:"none"},data:{i:0,workCount:0},dy:0,dx:0}])}()}),W.prose1.on("leave",function(){$(".explain1").removeClass("focus")}),W.prose2.on("enter",function(){$(".explain2").addClass("focus"),function(){console.log("SVG HEIGHT = "+$("svg").innerHeight()),console.log("SVG WIDTH = "+$("svg").innerWidth()),l="abs";h.selectAll("path").data(F(O)).transition().duration(1400).attr("d",w).attr("fill",function(e){return"first"==e.key?"Tomato":"repeat"==e.key?"Steelblue":void 0});console.log(O),h.select(".yAxis").transition().duration(1400).call(P),d3.select(".yAxis").select(".domain").remove(),d3.select(".y-axis-label").transition().duration(1400).text("NUMBER OF UNIQUE PIECES PER SEASON");var e=[{note:{title:"1909-10 Season",label:"Gustav Mahler's first season as music director was also a milestone season for the NYP: the orchestra 3X'ed their concert offerings (from 18 to 54 concerts), and nearly tripled the # of uniques pieces they performed (31 to 85).",wrap:window.innerWidth<=1024?130:165},data:{i:67,workCount:85},dy:-.1*g,dx:-.1*p}];window.innerWidth>550&&window.innerHeight>586&&S.accessors({x:function(e){return v(e.i)},y:function(e){return m(e.workCount)}}).annotations(e)}()}),W.prose2.on("leave",function(){$(".explain2").removeClass("focus")}),W.prose3.on("enter",function(){$(".explain3").addClass("focus"),function(){l="pct";S.type(d3.annotationLabel).accessors({x:function(e){return v(e.i)},y:function(e){return y(e.perc)}}).annotations([{note:{title:" "},data:{i:0,perc:0},dy:0,dx:0}]);var e=f(R);h.selectAll("path").data(e).transition().duration(1400).attr("d",x).attr("fill",function(e){return"percentageFirst"==e.key?"Tomato":"percentageRepeat"==e.key?"Steelblue":void 0}),h.select(".yAxis").transition().duration(1400).call(I),d3.select(".yAxis").select(".domain").remove(),d3.select(".y-axis-label").transition().duration(1400).text("PERCENTAGE OF UNIQUE COMPOSITIONS PER SEASON")}()}),W.prose3.on("leave",function(){$(".explain3").removeClass("focus")}),W.prose4.on("enter",function(){$(".explain4").addClass("focus"),function(){l="pct";var e=[{note:{title:"1859-60 Season",label:"First-time performances drop under 50%; more repeats than first-time pieces every season from this point on",wrap:window.innerWidth<=1024?130:165,align:"left"},data:{i:17,perc:.488},dy:-.12*g,dx:.1*p}];S.accessors({x:function(e){return v(e.i)},y:function(e){return y(e.perc)}}).annotations(e),console.log(o(R,["percentageFirst","percentageRepeat"],7));h.selectAll("path").data(f(o(R,["percentageFirst","percentageRepeat"],7))).transition().duration(1400).attr("d",x).attr("fill",function(e){return"percentageFirst"==e.key?"Tomato":"percentageRepeat"==e.key?"Steelblue":void 0});var t=z.selectAll("g").data(D);t.select("rect").transition().duration(1400).attr("fill",function(e){return e.color}).attr("stroke",function(e){return e.color}),t.select("text").transition().duration(1400).text(function(e){return e.text})}()}),W.prose4.on("leave",function(){$(".explain4").removeClass("focus")}),W.prose5.on("enter",function(){$(".explain5").addClass("focus"),function(){l="pct";var e=[{note:{title:"1967-68 Season",label:"Average % of living composers drops below 20% and has remained under 20% since",wrap:window.innerWidth<=1024?130:165},data:{i:125,perc:.197},dy:-.12*g,dx:0}];S.accessors({x:function(e){return v(e.i)},y:function(e){return y(e.perc)}}).annotations(e);var t=h.selectAll("path").data(r(o(b,["percentageAlive","percentageDead"],7)));console.log(o(b,["percentageAlive","percentageDead"],7)),t.transition().duration(1400).attr("d",x).attr("fill",function(e){return"percentageAlive"==e.key?"#ff645f":"percentageDead"==e.key?"#7776bd":void 0});var n=z.selectAll("g").data([{text:"Pieces by living composers",color:"#ff645f"},{text:"Pieces by deceased composers",color:"#7776bd"}]);n.select("rect").transition().duration(1400).attr("fill",function(e){return e.color}).attr("stroke",function(e){return e.color}),n.select("text").transition().duration(1400).text(function(e){return e.text})}()}),W.prose5.on("leave",function(){$(".explain5").removeClass("focus")}),W.prose6.on("enter",function(e){$(".explain6").addClass("focus"),"FORWARD"===e.scrollDirection&&function(){l="line";var e=0,t=[{note:{title:"Percentage of pieces that are repeat performances of music by a living composer",wrap:130},data:{i:45,perc:k[79].percentageOfTotalRepeatsLiving},dy:-.22*g,dx:.14*p}];u=d3.timer(function(){e>=175?(u.stop(),S.annotations(t)):(e+=2,j.attr("d",function(t){return B(t.slice(0,e))}))}),d3.select(".graph-content").selectAll("path")}()}),W.prose6.on("leave",function(e){$(".explain6").removeClass("focus"),"REVERSE"===e.scrollDirection&&function(){u&&u.stop(),j.attr("d",function(e){return B([{percentageOfTotalRepeatsLiving:0}])});S.annotations([{note:{title:" "},data:{i:0,perc:0},dy:0,dx:0}])}()}),window.addEventListener("resize",s(function(){var e=$(".streamgraph-section .graphic-title").outerHeight(!0),t=$(window).innerWidth(),n={};g=$(window).innerHeight()-e,p=$(".container").innerWidth(),h.attr("width",p).attr("height",g),v.range([0,p-92]),m.range([g-3*d,50]),y.range([g-3*d,50]),t>1024?(_.range([0,p-92]),M.select("rect").transition().duration(500).attr("x",function(e,t){return _(t)}).attr("y",2).attr("width",45).attr("height",20),M.select("text").transition().duration(500).attr("x",function(e,t){return _(t)+60}).attr("y",0)):t<=1024&&(M.select("rect").transition().duration(500).attr("width",35).attr("height",15).attr("x",0).attr("y",function(e,t){return 0==t?0:25}),M.select("text").transition().duration(500).attr("x",40).attr("y",function(e,t){return 0==t?0:25})),$("#first-explain").css("margin-top",$(window).innerHeight()/2),$("div.explain div").css("margin-bottom",function(){return console.log(this),"last-explain"!==this.id?$(window).innerHeight():0}),N.duration(document.querySelector(".outer-container").offsetHeight-window.innerHeight),L=d3.axisBottom().scale(v).tickValues(t<=1024?[8,58,108,158]:[8,33,58,83,108,133,158,174]).tickFormat(function(e){return C[e]}).tickSize(10),h.select(".xAxis").transition().duration(500).attr("transform","translate(67,"+(g-3*d)+")").call(L),h.select(".xAxis").select(".domain").remove(),h.select(".x-axis-label").attr("x",""+.5*(p-92)),h.select(".xAxis").selectAll(".tick").select("line").attr("stroke","rgba(40, 60, 70, 1)").attr("stroke-dasharray","2,2"),"abs"===l?(n.area=w,n.axis=P):(n.area=x,n.axis=I),h.select(".yAxis").attr("transform","translate(67,0)").call(n.axis),h.select(".yAxis").select(".domain").remove(),h.select(".graph-content").selectAll("path").transition().duration(500).attr("d",n.area).on("end",function(){if("line"===l){var e=0;u&&u.stop(),u=d3.timer(function(){e>=175?u.stop():(e+=2,d3.select(".trendline").attr("d",function(t){return B(t.slice(0,e))}))})}else h.select(".trendline").attr("d",function(e){return B([{percentageOfTotalRepeatsLiving:0}])})}),h.select("g.annotation-group").call(S),S.updatedAccessors()},200))});var T=new a.Controller,F=document.querySelector(".outer-container"),N=new a.Scene({triggerElement:".outer-container",duration:F.offsetHeight-window.innerHeight,triggerHook:0}).addTo(T);N.on("enter",function(){$(".inner-container").addClass("fixed")}),N.on("leave",function(e){$(".inner-container").removeClass("fixed"),"FORWARD"===e.scrollDirection?$(".inner-container").addClass("at-bottom"):$(".inner-container").removeClass("at-bottom")})},{"../../temp_utils/generate_seasons.js":4,"../../temp_utils/is-mobile.js":5,"../../temp_utils/moving_averages.js":6,"just-debounce-it":2,scrollmagic:3}],2:[function(e,t,n){t.exports=function(e,t,n){var r;return function(){if(!t)return e.apply(this,arguments);var o=this,i=arguments,a=n&&!r;return clearTimeout(r),r=setTimeout(function(){r=null,a||e.apply(o,i)},t),a?e.apply(this,arguments):void 0}}},{}],3:[function(e,t,n){!function(e,r){"function"==typeof define&&define.amd?define(r):"object"===(void 0===n?"undefined":_typeof(n))?t.exports=r():e.ScrollMagic=r()}(this,function(){var e=function(){r.log(2,"(COMPATIBILITY NOTICE) -> As of ScrollMagic 2.0.0 you need to use 'new ScrollMagic.Controller()' to create a new controller instance. Use 'new ScrollMagic.Scene()' to instance a scene.")};e.version="2.0.5",window.addEventListener("mousewheel",function(){});e.Controller=function(n){var o,i,a="ScrollMagic.Controller",s=t.defaults,l=this,c=r.extend({},s,n),u=[],d=!1,f=0,p="PAUSED",g=!0,h=0,v=!0,m=function(){c.refreshInterval>0&&(i=window.setTimeout(R,c.refreshInterval))},y=function(){return c.vertical?r.get.scrollTop(c.container):r.get.scrollLeft(c.container)},w=function(){return c.vertical?r.get.height(c.container):r.get.width(c.container)},x=this._setScrollPos=function(e){c.vertical?g?window.scrollTo(r.get.scrollLeft(),e):c.container.scrollTop=e:g?window.scrollTo(e,r.get.scrollTop()):c.container.scrollLeft=e},S=function(){if(v&&d){var e=r.type.Array(d)?d:u.slice(0);d=!1;var t=f,n=(f=l.scrollPos())-t;0!==n&&(p=n>0?"FORWARD":"REVERSE"),"REVERSE"===p&&e.reverse(),e.forEach(function(t,n){A(3,"updating Scene "+(n+1)+"/"+e.length+" ("+u.length+" total)"),t.update(!0)}),0===e.length&&c.loglevel>=3&&A(3,"updating 0 Scenes (nothing added to controller)")}},E=function(){o=r.rAF(S)},b=function(e){A(3,"event fired causing an update:",e.type),"resize"==e.type&&(h=w(),p="PAUSED"),!0!==d&&(d=!0,E())},R=function(){if(!g&&h!=w()){var e;try{e=new Event("resize",{bubbles:!1,cancelable:!1})}catch(t){(e=document.createEvent("Event")).initEvent("resize",!1,!1)}c.container.dispatchEvent(e)}u.forEach(function(e,t){e.refresh()}),m()},A=this._log=function(e,t){c.loglevel>=e&&(Array.prototype.splice.call(arguments,1,0,"("+a+") ->"),r.log.apply(window,arguments))};this._options=c;var k=function(e){if(e.length<=1)return e;var t=e.slice(0);return t.sort(function(e,t){return e.scrollOffset()>t.scrollOffset()?1:-1}),t};return this.addScene=function(t){if(r.type.Array(t))t.forEach(function(e,t){l.addScene(e)});else if(t instanceof e.Scene){if(t.controller()!==l)t.addTo(l);else if(u.indexOf(t)<0){u.push(t),u=k(u),t.on("shift.controller_sort",function(){u=k(u)});for(var n in c.globalSceneOptions)t[n]&&t[n].call(t,c.globalSceneOptions[n]);A(3,"adding Scene (now "+u.length+" total)")}}else A(1,"ERROR: invalid argument supplied for '.addScene()'");return l},this.removeScene=function(e){if(r.type.Array(e))e.forEach(function(e,t){l.removeScene(e)});else{var t=u.indexOf(e);t>-1&&(e.off("shift.controller_sort"),u.splice(t,1),A(3,"removing Scene (now "+u.length+" left)"),e.remove())}return l},this.updateScene=function(t,n){return r.type.Array(t)?t.forEach(function(e,t){l.updateScene(e,n)}):n?t.update(!0):!0!==d&&t instanceof e.Scene&&(-1==(d=d||[]).indexOf(t)&&d.push(t),d=k(d),E()),l},this.update=function(e){return b({type:"resize"}),e&&S(),l},this.scrollTo=function(t,n){if(r.type.Number(t))x.call(c.container,t,n);else if(t instanceof e.Scene)t.controller()===l?l.scrollTo(t.scrollOffset(),n):A(2,"scrollTo(): The supplied scene does not belong to this controller. Scroll cancelled.",t);else if(r.type.Function(t))x=t;else{var o=r.get.elements(t)[0];if(o){for(;o.parentNode.hasAttribute("data-scrollmagic-pin-spacer");)o=o.parentNode;var i=c.vertical?"top":"left",a=r.get.offset(c.container),s=r.get.offset(o);g||(a[i]-=l.scrollPos()),l.scrollTo(s[i]-a[i],n)}else A(2,"scrollTo(): The supplied argument is invalid. Scroll cancelled.",t)}return l},this.scrollPos=function(e){return arguments.length?(r.type.Function(e)?y=e:A(2,"Provided value for method 'scrollPos' is not a function. To change the current scroll position use 'scrollTo()'."),l):y.call(l)},this.info=function(e){var t={size:h,vertical:c.vertical,scrollPos:f,scrollDirection:p,container:c.container,isDocument:g};return arguments.length?void 0!==t[e]?t[e]:void A(1,'ERROR: option "'+e+'" is not available'):t},this.loglevel=function(e){return arguments.length?(c.loglevel!=e&&(c.loglevel=e),l):c.loglevel},this.enabled=function(e){return arguments.length?(v!=e&&(v=!!e,l.updateScene(u,!0)),l):v},this.destroy=function(e){window.clearTimeout(i);for(var t=u.length;t--;)u[t].destroy(e);return c.container.removeEventListener("resize",b),c.container.removeEventListener("scroll",b),r.cAF(o),A(3,"destroyed "+a+" (reset: "+(e?"true":"false")+")"),null},function(){for(var t in c)s.hasOwnProperty(t)||(A(2,'WARNING: Unknown option "'+t+'"'),delete c[t]);if(c.container=r.get.elements(c.container)[0],!c.container)throw A(1,"ERROR creating object "+a+": No valid scroll container supplied"),a+" init failed.";(g=c.container===window||c.container===document.body||!document.body.contains(c.container))&&(c.container=window),h=w(),c.container.addEventListener("resize",b),c.container.addEventListener("scroll",b),c.refreshInterval=parseInt(c.refreshInterval)||s.refreshInterval,m(),A(3,"added new "+a+" controller (v"+e.version+")")}(),l};var t={defaults:{container:window,vertical:!0,globalSceneOptions:{},loglevel:2,refreshInterval:100}};e.Controller.addOption=function(e,n){t.defaults[e]=n},e.Controller.extend=function(t){var n=this;e.Controller=function(){return n.apply(this,arguments),this.$super=r.extend({},this),t.apply(this,arguments)||this},r.extend(e.Controller,n),e.Controller.prototype=n.prototype,e.Controller.prototype.constructor=e.Controller},e.Scene=function(t){var o,i,a="ScrollMagic.Scene",s=n.defaults,l=this,c=r.extend({},s,t),u="BEFORE",d=0,f={start:0,end:0},p=0,g=!0,h={};this.on=function(e,t){return r.type.Function(t)?(e=e.trim().split(" ")).forEach(function(e){var n=e.split("."),r=n[0],o=n[1];"*"!=r&&(h[r]||(h[r]=[]),h[r].push({namespace:o||"",callback:t}))}):v(1,"ERROR when calling '.on()': Supplied callback for '"+e+"' is not a valid function!"),l},this.off=function(e,t){return e?((e=e.trim().split(" ")).forEach(function(e,n){var r=e.split("."),o=r[0],i=r[1]||"";("*"===o?Object.keys(h):[o]).forEach(function(e){for(var n=h[e]||[],r=n.length;r--;){var o=n[r];!o||i!==o.namespace&&"*"!==i||t&&t!=o.callback||n.splice(r,1)}n.length||delete h[e]})}),l):(v(1,"ERROR: Invalid event name supplied."),l)},this.trigger=function(t,n){if(t){var r=t.trim().split("."),o=r[0],i=r[1],a=h[o];v(3,"event fired:",o,n?"->":"",n||""),a&&a.forEach(function(t,r){i&&i!==t.namespace||t.callback.call(l,new e.Event(o,t.namespace,l,n))})}else v(1,"ERROR: Invalid event name supplied.");return l},l.on("change.internal",function(e){"loglevel"!==e.what&&"tweenChanges"!==e.what&&("triggerElement"===e.what?w():"reverse"===e.what&&l.update())}).on("shift.internal",function(e){m(),l.update()});var v=this._log=function(e,t){c.loglevel>=e&&(Array.prototype.splice.call(arguments,1,0,"("+a+") ->"),r.log.apply(window,arguments))};this.addTo=function(t){return t instanceof e.Controller?i!=t&&(i&&i.removeScene(l),i=t,E(),y(!0),w(!0),m(),i.info("container").addEventListener("resize",x),t.addScene(l),l.trigger("add",{controller:i}),v(3,"added "+a+" to controller"),l.update()):v(1,"ERROR: supplied argument of 'addTo()' is not a valid ScrollMagic Controller"),l},this.enabled=function(e){return arguments.length?(g!=e&&(g=!!e,l.update(!0)),l):g},this.remove=function(){if(i){i.info("container").removeEventListener("resize",x);var e=i;i=void 0,e.removeScene(l),l.trigger("remove"),v(3,"removed "+a+" from controller")}return l},this.destroy=function(e){return l.trigger("destroy",{reset:e}),l.remove(),l.off("*.*"),v(3,"destroyed "+a+" (reset: "+(e?"true":"false")+")"),null},this.update=function(e){if(i)if(e)if(i.enabled()&&g){var t,n=i.info("scrollPos");t=c.duration>0?(n-f.start)/(f.end-f.start):n>=f.start?1:0,l.trigger("update",{startPos:f.start,endPos:f.end,scrollPos:n}),l.progress(t)}else A&&"DURING"===u&&O(!0);else i.updateScene(l,!1);return l},this.refresh=function(){return y(),w(),l},this.progress=function(e){if(arguments.length){var t=!1,n=u,r=i?i.info("scrollDirection"):"PAUSED",o=c.reverse||e>=d;if(0===c.duration?(t=d!=e,u=0===(d=e<1&&o?0:1)?"BEFORE":"DURING"):e<0&&"BEFORE"!==u&&o?(d=0,u="BEFORE",t=!0):e>=0&&e<1&&o?(d=e,u="DURING",t=!0):e>=1&&"AFTER"!==u?(d=1,u="AFTER",t=!0):"DURING"!==u||o||O(),t){var a={progress:d,state:u,scrollDirection:r},s=u!=n,f=function(e){l.trigger(e,a)};s&&"DURING"!==n&&(f("enter"),f("BEFORE"===n?"start":"end")),f("progress"),s&&"DURING"!==u&&(f("BEFORE"===u?"start":"end"),f("leave"))}return l}return d};var m=function(){f={start:p+c.offset},i&&c.triggerElement&&(f.start-=i.info("size")*c.triggerHook),f.end=f.start+c.duration},y=function(e){if(o){b("duration",o.call(l))&&!e&&(l.trigger("change",{what:"duration",newval:c.duration}),l.trigger("shift",{reason:"duration"}))}},w=function(e){var t=0,n=c.triggerElement;if(i&&n){for(var o=i.info(),a=r.get.offset(o.container),s=o.vertical?"top":"left";n.parentNode.hasAttribute("data-scrollmagic-pin-spacer");)n=n.parentNode;var u=r.get.offset(n);o.isDocument||(a[s]-=i.scrollPos()),t=u[s]-a[s]}var d=t!=p;p=t,d&&!e&&l.trigger("shift",{reason:"triggerElementPosition"})},x=function(e){c.triggerHook>0&&l.trigger("shift",{reason:"containerResize"})},S=r.extend(n.validate,{duration:function(e){if(r.type.String(e)&&e.match(/^(\.|\d)*\d+%$/)){var t=parseFloat(e)/100;e=function(){return i?i.info("size")*t:0}}if(r.type.Function(e)){o=e;try{e=parseFloat(o())}catch(t){e=-1}}if(e=parseFloat(e),!r.type.Number(e)||e<0)throw o?(o=void 0,['Invalid return value of supplied function for option "duration":',e]):['Invalid value for option "duration":',e];return e}}),E=function(e){(e=arguments.length?[e]:Object.keys(S)).forEach(function(e,t){var n;if(S[e])try{n=S[e](c[e])}catch(t){n=s[e];var o=r.type.String(t)?[t]:t;r.type.Array(o)?(o[0]="ERROR: "+o[0],o.unshift(1),v.apply(this,o)):v(1,"ERROR: Problem executing validation callback for option '"+e+"':",t.message)}finally{c[e]=n}})},b=function(e,t){var n=!1,r=c[e];return c[e]!=t&&(c[e]=t,E(e),n=r!=c[e]),n},R=function(e){l[e]||(l[e]=function(t){return arguments.length?("duration"===e&&(o=void 0),b(e,t)&&(l.trigger("change",{what:e,newval:c[e]}),n.shifts.indexOf(e)>-1&&l.trigger("shift",{reason:e})),l):c[e]})};this.controller=function(){return i},this.state=function(){return u},this.scrollOffset=function(){return f.start},this.triggerPosition=function(){var e=c.offset;return i&&(c.triggerElement?e+=p:e+=i.info("size")*l.triggerHook()),e};var A,k;l.on("shift.internal",function(e){var t="duration"===e.reason;("AFTER"===u&&t||"DURING"===u&&0===c.duration)&&O(),t&&C()}).on("progress.internal",function(e){O()}).on("add.internal",function(e){C()}).on("destroy.internal",function(e){l.removePin(e.reset)});var O=function(e){if(A&&i){var t=i.info(),n=k.spacer.firstChild;if(e||"DURING"!==u){var o={position:k.inFlow?"relative":"absolute",top:0,left:0},a=r.css(n,"position")!=o.position;k.pushFollowers?c.duration>0&&("AFTER"===u&&0===parseFloat(r.css(k.spacer,"padding-top"))?a=!0:"BEFORE"===u&&0===parseFloat(r.css(k.spacer,"padding-bottom"))&&(a=!0)):o[t.vertical?"top":"left"]=c.duration*d,r.css(n,o),a&&C()}else{"fixed"!=r.css(n,"position")&&(r.css(n,{position:"fixed"}),C());var s=r.get.offset(k.spacer,!0),l=c.reverse||0===c.duration?t.scrollPos-f.start:Math.round(d*c.duration*10)/10;s[t.vertical?"top":"left"]+=l,r.css(k.spacer.firstChild,{top:s.top,left:s.left})}}},C=function(){if(A&&i&&k.inFlow){var e="DURING"===u,t=i.info("vertical"),n=k.spacer.firstChild,o=r.isMarginCollapseType(r.css(k.spacer,"display")),a={};k.relSize.width||k.relSize.autoFullWidth?e?r.css(A,{width:r.get.width(k.spacer)}):r.css(A,{width:"100%"}):(a["min-width"]=r.get.width(t?A:n,!0,!0),a.width=e?a["min-width"]:"auto"),k.relSize.height?e?r.css(A,{height:r.get.height(k.spacer)-(k.pushFollowers?c.duration:0)}):r.css(A,{height:"100%"}):(a["min-height"]=r.get.height(t?n:A,!0,!o),a.height=e?a["min-height"]:"auto"),k.pushFollowers&&(a["padding"+(t?"Top":"Left")]=c.duration*d,a["padding"+(t?"Bottom":"Right")]=c.duration*(1-d)),r.css(k.spacer,a)}},T=function(){i&&A&&"DURING"===u&&!i.info("isDocument")&&O()},F=function(){i&&A&&"DURING"===u&&((k.relSize.width||k.relSize.autoFullWidth)&&r.get.width(window)!=r.get.width(k.spacer.parentNode)||k.relSize.height&&r.get.height(window)!=r.get.height(k.spacer.parentNode))&&C()},N=function(e){i&&A&&"DURING"===u&&!i.info("isDocument")&&(e.preventDefault(),i._setScrollPos(i.info("scrollPos")-((e.wheelDelta||e[i.info("vertical")?"wheelDeltaY":"wheelDeltaX"])/3||30*-e.detail)))};this.setPin=function(e,t){if(t=r.extend({},{pushFollowers:!0,spacerClass:"scrollmagic-pin-spacer"},t),!(e=r.get.elements(e)[0]))return v(1,"ERROR calling method 'setPin()': Invalid pin element supplied."),l;if("fixed"===r.css(e,"position"))return v(1,"ERROR calling method 'setPin()': Pin does not work with elements that are positioned 'fixed'."),l;if(A){if(A===e)return l;l.removePin()}var n=(A=e).parentNode.style.display,o=["top","left","bottom","right","margin","marginLeft","marginRight","marginTop","marginBottom"];A.parentNode.style.display="none";var i="absolute"!=r.css(A,"position"),a=r.css(A,o.concat(["display"])),s=r.css(A,["width","height"]);A.parentNode.style.display=n,!i&&t.pushFollowers&&(v(2,"WARNING: If the pinned element is positioned absolutely pushFollowers will be disabled."),t.pushFollowers=!1),window.setTimeout(function(){A&&0===c.duration&&t.pushFollowers&&v(2,"WARNING: pushFollowers =",!0,"has no effect, when scene duration is 0.")},0);var u=A.parentNode.insertBefore(document.createElement("div"),A),d=r.extend(a,{position:i?"relative":"absolute",boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"});if(i||r.extend(d,r.css(A,["width","height"])),r.css(u,d),u.setAttribute("data-scrollmagic-pin-spacer",""),r.addClass(u,t.spacerClass),k={spacer:u,relSize:{width:"%"===s.width.slice(-1),height:"%"===s.height.slice(-1),autoFullWidth:"auto"===s.width&&i&&r.isMarginCollapseType(a.display)},pushFollowers:t.pushFollowers,inFlow:i},!A.___origStyle){A.___origStyle={};var f=A.style;o.concat(["width","height","position","boxSizing","mozBoxSizing","webkitBoxSizing"]).forEach(function(e){A.___origStyle[e]=f[e]||""})}return k.relSize.width&&r.css(u,{width:s.width}),k.relSize.height&&r.css(u,{height:s.height}),u.appendChild(A),r.css(A,{position:i?"relative":"absolute",margin:"auto",top:"auto",left:"auto",bottom:"auto",right:"auto"}),(k.relSize.width||k.relSize.autoFullWidth)&&r.css(A,{boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"}),window.addEventListener("scroll",T),window.addEventListener("resize",T),window.addEventListener("resize",F),A.addEventListener("mousewheel",N),A.addEventListener("DOMMouseScroll",N),v(3,"added pin"),O(),l},this.removePin=function(e){if(A){if("DURING"===u&&O(!0),e||!i){var t=k.spacer.firstChild;if(t.hasAttribute("data-scrollmagic-pin-spacer")){var n=k.spacer.style;margins={},["margin","marginLeft","marginRight","marginTop","marginBottom"].forEach(function(e){margins[e]=n[e]||""}),r.css(t,margins)}k.spacer.parentNode.insertBefore(t,k.spacer),k.spacer.parentNode.removeChild(k.spacer),A.parentNode.hasAttribute("data-scrollmagic-pin-spacer")||(r.css(A,A.___origStyle),delete A.___origStyle)}window.removeEventListener("scroll",T),window.removeEventListener("resize",T),window.removeEventListener("resize",F),A.removeEventListener("mousewheel",N),A.removeEventListener("DOMMouseScroll",N),A=void 0,v(3,"removed pin (reset: "+(e?"true":"false")+")")}return l};var P,I=[];return l.on("destroy.internal",function(e){l.removeClassToggle(e.reset)}),this.setClassToggle=function(e,t){var n=r.get.elements(e);return 0!==n.length&&r.type.String(t)?(I.length>0&&l.removeClassToggle(),P=t,I=n,l.on("enter.internal_class leave.internal_class",function(e){var t="enter"===e.type?r.addClass:r.removeClass;I.forEach(function(e,n){t(e,P)})}),l):(v(1,"ERROR calling method 'setClassToggle()': Invalid "+(0===n.length?"element":"classes")+" supplied."),l)},this.removeClassToggle=function(e){return e&&I.forEach(function(e,t){r.removeClass(e,P)}),l.off("start.internal_class end.internal_class"),P=void 0,I=[],l},function(){for(var e in c)s.hasOwnProperty(e)||(v(2,'WARNING: Unknown option "'+e+'"'),delete c[e]);for(var t in s)R(t);E()}(),l};var n={defaults:{duration:0,offset:0,triggerElement:void 0,triggerHook:.5,reverse:!0,loglevel:2},validate:{offset:function(e){if(e=parseFloat(e),!r.type.Number(e))throw['Invalid value for option "offset":',e];return e},triggerElement:function(e){if(e=e||void 0){var t=r.get.elements(e)[0];if(!t)throw['Element defined in option "triggerElement" was not found:',e];e=t}return e},triggerHook:function(e){var t={onCenter:.5,onEnter:1,onLeave:0};if(r.type.Number(e))e=Math.max(0,Math.min(parseFloat(e),1));else{if(!(e in t))throw['Invalid value for option "triggerHook": ',e];e=t[e]}return e},reverse:function(e){return!!e},loglevel:function(e){if(e=parseInt(e),!r.type.Number(e)||e<0||e>3)throw['Invalid value for option "loglevel":',e];return e}},shifts:["duration","offset","triggerHook"]};e.Scene.addOption=function(t,r,o,i){t in n.defaults?e._util.log(1,"[static] ScrollMagic.Scene -> Cannot add Scene option '"+t+"', because it already exists."):(n.defaults[t]=r,n.validate[t]=o,i&&n.shifts.push(t))},e.Scene.extend=function(t){var n=this;e.Scene=function(){return n.apply(this,arguments),this.$super=r.extend({},this),t.apply(this,arguments)||this},r.extend(e.Scene,n),e.Scene.prototype=n.prototype,e.Scene.prototype.constructor=e.Scene},e.Event=function(e,t,n,r){r=r||{};for(var o in r)this[o]=r[o];return this.type=e,this.target=this.currentTarget=n,this.namespace=t||"",this.timeStamp=this.timestamp=Date.now(),this};var r=e._util=function(e){var t,n={},r=function(e){return parseFloat(e)||0},o=function(t){return t.currentStyle?t.currentStyle:e.getComputedStyle(t)},i=function(t,n,i,a){if((n=n===document?e:n)===e)a=!1;else if(!g.DomElement(n))return 0;t=t.charAt(0).toUpperCase()+t.substr(1).toLowerCase();var s=(i?n["offset"+t]||n["outer"+t]:n["client"+t]||n["inner"+t])||0;if(i&&a){var l=o(n);s+="Height"===t?r(l.marginTop)+r(l.marginBottom):r(l.marginLeft)+r(l.marginRight)}return s},a=function(e){return e.replace(/^[^a-z]+([a-z])/g,"$1").replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})};n.extend=function(e){for(e=e||{},t=1;t<arguments.length;t++)if(arguments[t])for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&(e[n]=arguments[t][n]);return e},n.isMarginCollapseType=function(e){return["block","flex","list-item","table","-webkit-box"].indexOf(e)>-1};var s=0,l=["ms","moz","webkit","o"],c=e.requestAnimationFrame,u=e.cancelAnimationFrame;for(t=0;!c&&t<l.length;++t)c=e[l[t]+"RequestAnimationFrame"],u=e[l[t]+"CancelAnimationFrame"]||e[l[t]+"CancelRequestAnimationFrame"];c||(c=function(t){var n=(new Date).getTime(),r=Math.max(0,16-(n-s)),o=e.setTimeout(function(){t(n+r)},r);return s=n+r,o}),u||(u=function(t){e.clearTimeout(t)}),n.rAF=c.bind(e),n.cAF=u.bind(e);var d=["error","warn","log"],f=e.console||{};for(f.log=f.log||function(){},t=0;t<d.length;t++){var p=d[t];f[p]||(f[p]=f.log)}n.log=function(e){(e>d.length||e<=0)&&(e=d.length);var t=new Date,n=("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)+":"+("00"+t.getMilliseconds()).slice(-3),r=d[e-1],o=Array.prototype.splice.call(arguments,1),i=Function.prototype.bind.call(f[r],f);o.unshift(n),i.apply(f,o)};var g=n.type=function(e){return Object.prototype.toString.call(e).replace(/^\[object (.+)\]$/,"$1").toLowerCase()};g.String=function(e){return"string"===g(e)},g.Function=function(e){return"function"===g(e)},g.Array=function(e){return Array.isArray(e)},g.Number=function(e){return!g.Array(e)&&e-parseFloat(e)+1>=0},g.DomElement=function(e){return"object"===("undefined"==typeof HTMLElement?"undefined":_typeof(HTMLElement))?e instanceof HTMLElement:e&&"object"===(void 0===e?"undefined":_typeof(e))&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName};var h=n.get={};return h.elements=function(t){var n=[];if(g.String(t))try{t=document.querySelectorAll(t)}catch(e){return n}if("nodelist"===g(t)||g.Array(t))for(var r=0,o=n.length=t.length;r<o;r++){var i=t[r];n[r]=g.DomElement(i)?i:h.elements(i)}else(g.DomElement(t)||t===document||t===e)&&(n=[t]);return n},h.scrollTop=function(t){return t&&"number"==typeof t.scrollTop?t.scrollTop:e.pageYOffset||0},h.scrollLeft=function(t){return t&&"number"==typeof t.scrollLeft?t.scrollLeft:e.pageXOffset||0},h.width=function(e,t,n){return i("width",e,t,n)},h.height=function(e,t,n){return i("height",e,t,n)},h.offset=function(e,t){var n={top:0,left:0};if(e&&e.getBoundingClientRect){var r=e.getBoundingClientRect();n.top=r.top,n.left=r.left,t||(n.top+=h.scrollTop(),n.left+=h.scrollLeft())}return n},n.addClass=function(e,t){t&&(e.classList?e.classList.add(t):e.className+=" "+t)},n.removeClass=function(e,t){t&&(e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," "))},n.css=function(e,t){if(g.String(t))return o(e)[a(t)];if(g.Array(t)){var n={},r=o(e);return t.forEach(function(e,t){n[e]=r[a(e)]}),n}for(var i in t){var s=t[i];s==parseFloat(s)&&(s+="px"),e.style[a(i)]=s}},n}(window||{});return e.Scene.prototype.addIndicators=function(){return e._util.log(1,"(ScrollMagic.Scene) -> ERROR calling addIndicators() due to missing Plugin 'debug.addIndicators'. Please make sure to include plugins/debug.addIndicators.js"),this},e.Scene.prototype.removeIndicators=function(){return e._util.log(1,"(ScrollMagic.Scene) -> ERROR calling removeIndicators() due to missing Plugin 'debug.addIndicators'. Please make sure to include plugins/debug.addIndicators.js"),this},e.Scene.prototype.setTween=function(){return e._util.log(1,"(ScrollMagic.Scene) -> ERROR calling setTween() due to missing Plugin 'animation.gsap'. Please make sure to include plugins/animation.gsap.js"),this},e.Scene.prototype.removeTween=function(){return e._util.log(1,"(ScrollMagic.Scene) -> ERROR calling removeTween() due to missing Plugin 'animation.gsap'. Please make sure to include plugins/animation.gsap.js"),this},e.Scene.prototype.setVelocity=function(){return e._util.log(1,"(ScrollMagic.Scene) -> ERROR calling setVelocity() due to missing Plugin 'animation.velocity'. Please make sure to include plugins/animation.velocity.js"),this},e.Scene.prototype.removeVelocity=function(){return e._util.log(1,"(ScrollMagic.Scene) -> ERROR calling removeVelocity() due to missing Plugin 'animation.velocity'. Please make sure to include plugins/animation.velocity.js"),this},e})},{}],4:[function(e,t,n){t.exports=function(e,t){for(var n=[],r=e;r<=t;r++){var o=String(r+1).slice(2,4);n.push(String(r+"-"+o))}return n}},{}],5:[function(e,t,n){function r(){return{android:function(){return navigator.userAgent.match(/Android/i)},blackberry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return r().android()||r().blackberry()||r().ios()||r().opera()||r().windows()}}}t.exports=r},{}],6:[function(e,t,n){t.exports=function(e,t,n){var r=e.length-1,o=Math.floor(n/2),i=r-o;return e.map(function(r,a){if(a<o||a>i)return r;var s=a-o>=0?a-o:0,l=a+o+1,c=e.slice(s,l),u={};return t&&0!==t.length?(t.forEach(function(e){u[e]=c.reduce(function(t,n){return t+n[e]},0)/n}),Object.assign({season:r.season},u)):c.reduce(function(e,t){return e+t},0)/n})}},{}]},{},[1]);